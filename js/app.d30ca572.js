(function(e){function t(t){for(var c,s,n=t[0],b=t[1],i=t[2],p=0,l=[];p<n.length;p++)s=n[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&l.push(o[s][0]),o[s]=0;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(e[c]=b[c]);u&&u(t);while(l.length)l.shift()();return a.push.apply(a,i||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],c=!0,n=1;n<r.length;n++){var b=r[n];0!==o[b]&&(c=!1)}c&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var c={},o={app:0},a=[];function s(t){if(c[t])return c[t].exports;var r=c[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=c,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)s.d(r,c,function(t){return e[t]}.bind(null,c));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/breweries/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],b=n.push.bind(n);n.push=t,n=n.slice();for(var i=0;i<n.length;i++)t(n[i]);var u=b;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},cd49:function(e,t,r){"use strict";r.r(t);var c,o=r("7a23"),a=r("8c4f");(function(e){e["Home"]="home",e["Index"]="index",e["Detail"]="detail",e["About"]="about"})(c||(c={}));var s=r("ab42");const n=Object(o["f"])({setup:(e,{slots:t})=>()=>Object(o["h"])("div",{class:"bg-white shadow rounded-lg p-4 mb-6"},t)}),b=Object(o["f"])({setup:(e,{slots:t})=>()=>Object(o["h"])("table",{class:"w-full -my-3"},[t.head?Object(o["h"])("thead",{class:"text-left border-b-2 border-gray-400"},Object(o["h"])("tr",t.head())):void 0,Object(o["h"])("tbody",t.default?t.default():void 0)])});var i=r("906c");const u=()=>null,p=()=>"",l=Object(i["fold"])(p,e=>e),d=e=>Object(i["fold"])(u,e),O=d(e=>Object(o["h"])("a",{href:e},e)),j=d(e=>Object(o["h"])("p",e)),h=e=>Object(o["h"])("tr",[Object(o["h"])("td",Object(o["h"])(a["a"],{to:{name:c.Detail,params:{id:e.id}}},()=>e.name)),Object(o["h"])("td",l(e.address.city))]),f=Object(o["f"])({props:{list:{type:Object,required:!0}},setup:e=>()=>{const{t:t}=Object(s["b"])();return Object(o["h"])(b,{},{head:()=>[Object(o["h"])("th",t("Name")),Object(o["h"])("th",t("City"))],default:()=>e.list.map(h)})}}),m=Object(o["f"])({setup:(e,{slots:t})=>()=>Object(o["h"])("button",{class:"bg-gray-300 rounded px-4 py-1"},t)}),y=Object(o["f"])({setup:(e,{slots:t})=>()=>Object(o["h"])("div",{class:"max-w-3xl mx-auto"},t)});class g{constructor(e){this.code=e}}var w;(function(e){e[e["NetworkError"]=10]="NetworkError",e[e["ParseError"]=20]="ParseError",e[e["DecodeError"]=30]="DecodeError"})(w||(w={}));var v=r("14bc"),x=r("3af4");const k=(e,t,r)=>Object(x["pipe"])(Object(i["tryCatch"])(e[t]),Object(i["getOrElse"])(()=>r));function E(e){const{t:t}=Object(s["b"])();if(e>=500&&e<=599)return t("Server error");const r={[w.NetworkError]:()=>t("Network error"),[w.ParseError]:()=>t("Parse error"),[w.DecodeError]:()=>t("Decode error"),[v["a"]]:()=>t("Forbidden"),[v["b"]]:()=>t("Not found error")};return k(r,e,t("Unknown error"))}const N=Object(o["f"])({props:{error:{type:g,required:!0}},setup:(e,{emit:t})=>()=>{const{t:r}=Object(s["b"])();return Object(o["h"])(n,{class:"border-red-400 border-4"},()=>[Object(o["h"])(S,()=>r("Error")),Object(o["h"])("p",{class:"mb-3"},E(e.error.code)),Object(o["h"])(m,{onClick:()=>t("retry")},()=>r("Retry"))])}}),S=Object(o["f"])({setup:(e,{slots:t})=>()=>Object(o["h"])("h2",{class:"text-xl font-bold"},t)}),A=({name:e,id:t})=>Object(o["h"])("li",Object(o["h"])(a["a"],{to:{name:c.Detail,params:{id:t}}},()=>e)),P=Object(o["f"])({props:{breweries:{type:Object,required:!0}},setup:e=>()=>{const{t:t}=Object(s["b"])();return[Object(o["h"])(S,()=>t("Featured breweries")),Object(o["h"])("ul",{class:"list-disc pl-6"},e.breweries.map(A))]}}),q=Object(o["f"])({props:{label:{type:String,required:!0},value:{type:String,required:!0}},setup:(e,{emit:t})=>()=>Object(o["h"])("label",{class:"block w-full my-2 sm:w-64 sm:mr-3"},[Object(o["h"])("div",{class:"text-xs text-gray-600"},e.label),Object(o["h"])("input",{class:"w-full rounded border border-gray-300 px-2 py-1",value:e.value,onInput:e=>{e.stopPropagation(),e.target&&t("input",e.target.value)}})])}),_=Object(o["f"])({setup:()=>()=>Object(o["h"])(n,{class:"p-16"},()=>Object(o["h"])("svg",{class:"animate-spin h-8 w-8 mx-auto text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",innerHTML:'<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>'}))}),C="pk.eyJ1IjoiaW50ZXJmZWNvIiwiYSI6ImNrZWZxeHoxMzBzejgzNnQ1N2U1djlvc3kifQ.4FBmQ_sbClfeyMKuunHx1g",I=200,T=(e,t)=>({longitude:r,latitude:c},o)=>`https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/${r},${c},${o},0/${e}x${t}?access_token=`+C,H=T(I,I),R=Object(o["f"])({props:{coordinates:{type:Object,required:!0}},setup:e=>()=>Object(o["h"])("img",{class:"rounded",style:"background-color: #ECE7E2; width: 200px; height: 200px;",src:H(e.coordinates,12)})}),B=Object(o["f"])({props:{routeName:{type:String,required:!0}},setup:(e,{slots:t})=>()=>Object(o["h"])(a["a"],{class:"px-3 font-bold",to:{name:e.routeName}},t)}),D=Object(o["f"])({setup:()=>()=>{const{t:e}=Object(s["b"])();return Object(o["h"])("div",{class:"bg-white fixed p-3 shadow inset top-0 inset-x-0"},[Object(o["h"])(B,{routeName:c.Home},()=>e("Home")),Object(o["h"])(B,{routeName:c.Index},()=>e("Breweries")),Object(o["h"])(B,{routeName:c.About},()=>e("About"))])}}),M=e=>({...ot.currentRoute.value.query,page:e}),z=Object(o["f"])({props:{page:{type:Number,required:!0}},setup:e=>()=>{const{t:t}=Object(s["b"])();return Object(o["h"])("div",{class:"flex"},[e.page>1?Object(o["h"])(a["a"],{to:{query:M(e.page-1)}},()=>t("Previous page")):null,Object(o["h"])(a["a"],{class:"ml-auto",to:{query:M(e.page+1)}},()=>t("Next page"))])}}),J=Object(o["f"])({setup:(e,{slots:t})=>()=>Object(o["h"])("span",{class:"text-xs font-bold bg-blue-600 text-white rounded px-2 py-1 mx-1 align-middle"},t)}),L=Object(o["f"])({setup:(e,{slots:t})=>()=>Object(o["h"])("h1",{class:"text-2xl font-bold"},t)}),$=Object(o["f"])({setup(){const{t:e}=Object(s["b"])();return()=>Object(o["h"])(n,{class:"my-48"},()=>[Object(o["h"])(L,()=>e("Brewery DB Search")),Object(o["h"])("p",e("A showcase Vue.js application")),Object(o["h"])(a["a"],{to:{name:c.Index}},()=>e("See breweries"))])}});var F=r("150a"),U=r("8fe2"),W=r("9199"),Z=r("dee3"),Q=r("3c17");const V=U["i"]({name:U["g"],brewery_type:U["g"],street:Object(W["a"])(U["g"]),city:Object(W["a"])(U["g"]),state:Object(W["a"])(U["g"]),country:Object(W["a"])(U["g"]),phone:Object(W["a"])(U["g"]),longitude:Object(W["a"])(Z["a"]),latitude:Object(W["a"])(Z["a"]),website_url:Object(W["a"])(U["g"]),updated_at:Q["a"]}),Y=U["i"]({id:U["e"],name:U["g"],city:Object(W["a"])(U["g"]),country:Object(W["a"])(U["g"])}),G=U["b"](Y),K=e=>({name:e.name,type:e.brewery_type,address:{street:e.street,city:e.city,state:e.state,country:e.country},coordinates:Object(i["isSome"])(e.longitude)&&Object(i["isSome"])(e.latitude)?Object(i["some"])({longitude:Object(i["getOrElse"])(()=>0)(e.longitude),latitude:Object(i["getOrElse"])(()=>0)(e.latitude)}):i["none"],phone:e.phone,website:e.website_url,updatedAt:e.updated_at}),X=e=>({id:e.id,name:e.name,address:{city:e.city,country:e.country}}),ee=e=>e.map(X);var te=r("fb60");const re=e=>t=>new Request(t,{method:e}),ce=re("get"),oe=(re("put"),re("post"),re("delete"),e=>Object(F["tryCatch"])(()=>fetch(e),te["toError"]));var ae,se;(function(e){e["ApplicationJson"]="application/json"})(ae||(ae={})),function(e){e["Accept"]="Accept",e["Authorization"]="Authorization",e["ContentType"]="Content-Type"}(se||(se={}));const ne=e=>t=>{const r=new Headers(t.headers);return e.forEach((e,t)=>r.set(t,e)),new Request(t,{headers:r})},be=e=>t=>{const r=new URL(t.url);return e.forEach((e,t)=>r.searchParams.set(t,e)),new Request(r.toString(),t)};class ie{constructor(e,t,r,c){this.ok=e,this.status=t,this.headers=r,this.parsed=c}}const ue=e=>Object(x["pipe"])(Object(F["tryCatch"])(()=>e.json(),()=>new g(w.ParseError)),Object(F["map"])(t=>new ie(e.ok,e.status,e.headers,t))),pe=Object(x["flow"])(Object(te["fromPredicate"])(e=>e.ok,e=>new g(e.status)),F["fromEither"]),le=e=>Object(x["flow"])(e=>e.parsed,e.decode,Object(te["mapLeft"])(()=>new g(w.DecodeError)),F["fromEither"]),de=Object(x["flow"])(oe,Object(F["mapLeft"])(()=>new g(w.NetworkError)),Object(F["chain"])(ue),Object(F["chain"])(pe)),Oe=e=>e.replace(/ /g,"_"),je=e=>e.toString(),he=ne(new Headers({[se.ContentType]:ae.ApplicationJson,[se.Accept]:ae.ApplicationJson})),fe=ne(new Headers({[se.Authorization]:"Bearer token"})),me=(Object(x["flow"])(ce,he),Object(x["flow"])(ce,fe)),ye="https://api.openbrewerydb.org/breweries",ge=e=>`${ye}/${e}`,we=e=>new URLSearchParams({by_city:Oe(e.city),by_name:Oe(e.name),page:je(e.page)}),ve=e=>Object(x["pipe"])(ye,me,be(we(e)),de,Object(F["chain"])(le(G)),Object(F["map"])(ee)),xe=Object(x["flow"])(ge,me,de,Object(F["chain"])(le(V)),Object(F["map"])(K)),ke=500;let Ee,Ne={};const Se=()=>{Ne={...ot.currentRoute.value.query}},Ae=(e,t)=>{Ne[e]=t},Pe=e=>{delete Ne[e]},qe=()=>{ot.push({query:Ne})},_e=()=>{window.clearTimeout(Ee),Ee=window.setTimeout(qe,ke)},Ce=(e,t,r,c)=>{const a=t(c);return Object(o["c"])({get:()=>{const t=ot.currentRoute.value.query[e];return"string"!==typeof t?c:r(t,c)},set:r=>{const c=t(r);c===a?Pe(e):Ae(e,c),_e()}})},Ie=e=>e,Te=e=>e,He=e=>e.toString(),Re=(e,t=0)=>{const r=parseInt(e,10);return isNaN(r)?t:r},Be=(e,t=0)=>Ce(e,He,Re,t),De=(e,t="")=>Ce(e,Ie,Te,t),Me=()=>null,ze=()=>Object(o["h"])(_),Je=(e,t,r,c)=>o=>o.pending?t():"error"in o?r(o.error):"result"in o?c(o.result):e(),Le=(e,t)=>Je(Me,ze,e,t);var $e=r("68b6"),Fe=r("7d54"),Ue=r("ec26");const We={},Ze=(e,t)=>r=>()=>{We[e]===t&&(r(),delete We[e])},Qe=()=>{const e=Object(Ue["a"])(),t=Object(Ue["a"])();return We[e]=t,Ze(e,t)};function Ve(e){const t=Object(o["o"])({pending:!1}),r=()=>{const r=Qe();t.value={pending:!0};const c=e=>$e["task"].fromIO(r(()=>t.value={pending:!1,error:e})),o=e=>$e["task"].fromIO(r(()=>t.value={pending:!1,result:e}));Object(Fe["pipe"])(e(),Object(F["fold"])(c,o))()};return{executeTask:r,taskState:t}}const Ye=1,Ge=Object(o["f"])({setup(){const{t:e}=Object(s["b"])(),t=Be("page",Ye),r=De("city"),c=De("name"),{executeTask:a,taskState:b}=Ve(()=>ve({city:r.value,name:c.value,page:t.value}));a(),Object(o["s"])([t,r,c],a);const i=e=>{e(),t.value=Ye};return()=>[Object(o["h"])(L,()=>e("Breweries")),Object(o["h"])("form",{class:"py-4 sm:flex"},[Object(o["h"])(q,{label:e("Name"),value:c.value,onInput:e=>i(()=>c.value=e)}),Object(o["h"])(q,{label:e("City"),value:r.value,onInput:e=>i(()=>r.value=e)})]),Le(e=>Object(o["h"])(N,{error:e,onRetry:a}),e=>Object(o["h"])(n,()=>Object(o["h"])(f,{list:e})))(b.value),Object(o["h"])(z,{page:t.value})]}}),Ke=Object(o["f"])({props:{id:{type:Number,required:!0}},setup(e){const{t:t,d:r}=Object(s["b"])(),{executeTask:c,taskState:a}=Ve(()=>xe(e.id));return c(),Object(o["s"])(e,()=>console.log(JSON.stringify(e))),Object(o["s"])(e,c),()=>[Le(e=>Object(o["h"])(N,{error:e,onRetry:c}),e=>Object(o["h"])(n,{class:"flex"},()=>[Object(o["h"])("div",{class:"flex-1"},[Object(o["h"])(L,()=>[e.name,Object(o["h"])(J,()=>e.type)]),j(e.address.street),j(e.address.city),j(e.address.state),j(e.address.country),d(e=>Object(o["h"])("p",t("Phone: {value}",{value:e})))(e.phone),O(e.website),Object(o["h"])("p",{class:"text-xs italic text-gray-500 pt-6"},t("Last updated on {date}.",{date:r(e.updatedAt)}))]),d(e=>Object(o["h"])(R,{coordinates:e}))(e.coordinates)]))(a.value),Object(o["h"])(P,{breweries:[{name:"Morgan Territory Brewing",id:832},{name:"Mother Earth Brew Co LLC",id:833},{name:"Non-existing Brewery (this will be 404)",id:0}]})]}}),Xe=Object(o["f"])({setup(){const{t:e}=Object(s["b"])();return()=>Object(o["h"])(n,()=>[Object(o["h"])(L,()=>e("About this app")),Object(o["h"])("p",e("This application was created to demonstrate some SPA architecture best practices.")),Object(o["h"])("p",e("You can read about them on the GitHub project page:")),Object(o["h"])("a",{href:"https://github.com/interferenc/breweries"},"https://github.com/interferenc/breweries")])}}),et=Object(o["f"])({setup:()=>()=>Object(o["h"])(y,()=>Object(o["h"])(a["b"]))}),tt=Object(o["f"])({setup:()=>()=>Object(o["h"])("div",{class:"pt-16 p-6"},[Object(o["h"])(D),Object(o["h"])(y,()=>Object(o["h"])(a["b"]))])}),rt=e=>({id:Re(e.params.id)}),ct=[{path:"/",component:et,children:[{path:"",name:c.Home,component:$}]},{path:"/",component:tt,children:[{path:"breweries",name:c.Index,component:Ge},{path:"breweries/:id",name:c.Detail,component:Ke,props:rt},{path:"about",name:c.About,component:Xe}]}],ot=Object(a["c"])({history:Object(a["d"])("/breweries/"),routes:ct}),at=Object(s["a"])({locale:"en",missingWarn:!1,fallbackFormat:!0,messages:{en:{},de:{}}});r("d5d2");ot.isReady().then(Se),Object(o["d"])(a["b"]).use(ot).use(at).mount("#app")},d5d2:function(e,t,r){}});
//# sourceMappingURL=app.d30ca572.js.map